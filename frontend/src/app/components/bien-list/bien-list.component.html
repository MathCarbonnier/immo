<div class="container">
  <div class="row mb-4">
    <div class="col">
      <h1>Liste des biens immobiliers</h1>
    </div>
  </div>

  <!-- Action buttons -->
  <div class="row mb-4">
    <div class="col d-flex gap-2">
      <button class="btn btn-primary" (click)="navigateToNew()">
        <i class="bi bi-plus-circle me-1"></i> Ajouter un bien
      </button>
      
      <button class="btn" 
              [class.btn-outline-danger]="!deleteMode" 
              [class.btn-danger]="deleteMode" 
              (click)="toggleDeleteMode()">
        <i class="bi" [class.bi-trash]="!deleteMode" [class.bi-x-circle]="deleteMode"></i>
        {{ deleteMode ? 'Annuler' : 'Mode suppression' }}
      </button>
      
      <button *ngIf="deleteMode" 
              class="btn btn-danger" 
              [disabled]="selectedBiens.length === 0"
              (click)="deleteSelected()">
        <i class="bi bi-trash me-1"></i> Supprimer la sélection ({{ selectedBiens.length }})
      </button>
    </div>
  </div>

  <!-- Loading indicator -->
  <div *ngIf="loading" class="row">
    <div class="col text-center py-5">
      <div class="spinner-border text-primary" role="status">
        <span class="visually-hidden">Loading...</span>
      </div>
      <p class="mt-2">Chargement des biens...</p>
    </div>
  </div>

  <!-- Error message -->
  <div *ngIf="error" class="row">
    <div class="col">
      <div class="alert alert-danger">
        Une erreur est survenue lors du chargement des biens.
        <button class="btn btn-sm btn-outline-danger ms-2" (click)="loadBiens()">Réessayer</button>
      </div>
    </div>
  </div>

  <!-- Empty state -->
  <div *ngIf="!loading && !error && biens.length === 0" class="row">
    <div class="col text-center py-5">
      <i class="bi bi-house-x display-1 text-muted"></i>
      <p class="mt-3 text-muted">Aucun bien immobilier disponible</p>
      <button class="btn btn-primary mt-2" (click)="navigateToNew()">Ajouter un bien</button>
    </div>
  </div>

  <!-- Property grid -->
  <div *ngIf="!loading && !error && biens.length > 0" class="row row-cols-1 row-cols-md-2 row-cols-lg-3 g-4">
    <div class="col" *ngFor="let bien of biens">
      <app-bien-card 
        [bien]="bien"
        [selectable]="deleteMode"
        [selected]="isSelected(bien.id!)"
        (toggleSelect)="toggleSelectBien($event)">
      </app-bien-card>
    </div>
  </div>
</div>