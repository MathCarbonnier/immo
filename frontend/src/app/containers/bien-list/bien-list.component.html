<div class="bien-list-container">
  <div class="header-section">
    <h1 class="page-title">Property Listings</h1>
  </div>

  <!-- Action buttons -->
  <div class="action-buttons">
    <div class="button-group">
      <button class="btn btn-primary" (click)="navigateToNew()">
        <i class="bi bi-plus-circle"></i> Add Listing
      </button>

      <button class="btn" 
              [class.btn-outline]="!deleteMode" 
              [class.btn-active]="deleteMode" 
              (click)="toggleDeleteMode()">
        <i class="bi" [class.bi-trash]="!deleteMode" [class.bi-x-circle]="deleteMode"></i>
        {{ deleteMode ? 'Cancel' : 'Deletion Mode' }}
      </button>

      <button *ngIf="deleteMode" 
              class="btn btn-danger" 
              [disabled]="selectedBiens.length === 0"
              (click)="deleteSelected()">
        <i class="bi bi-trash"></i> Delete Selected ({{ selectedBiens.length }})
      </button>
    </div>

    <!-- Status filter -->
    <div class="filter-group">
      <label for="statusFilter">
        <i class="bi bi-funnel"></i>
        Filter by status:
      </label>
      <select id="statusFilter" class="form-select status-filter" 
              [ngModel]="selectedStatus" 
              (ngModelChange)="onStatusFilterChange($event)">
        <option *ngFor="let option of statusOptions" [ngValue]="option.value">
          {{ option.label }}
        </option>
      </select>
    </div>
  </div>

  <!-- Loading indicator -->
  <div *ngIf="loading" class="loading-container">
    <div class="spinner">
      <span class="visually-hidden">Loading...</span>
    </div>
    <p class="loading-text">Loading properties...</p>
  </div>

  <!-- Error message -->
  <div *ngIf="error" class="error-container">
    <div class="error-message">
      An error occurred while loading properties.
      <button class="btn btn-outline" (click)="loadBiens()">Retry</button>
    </div>
  </div>

  <!-- Empty state -->
  <div *ngIf="!loading && !error && biens.length === 0" class="empty-state">
    <i class="bi bi-house-x empty-icon"></i>
    <p class="empty-text">No properties available</p>
    <button class="btn btn-primary" (click)="navigateToNew()">Add Listing</button>
  </div>

  <!-- No results for filter -->
  <div *ngIf="!loading && !error && biens.length > 0 && filteredBiens.length === 0" class="empty-state">
    <i class="bi bi-filter-circle-x empty-icon"></i>
    <p class="empty-text">No properties match the selected filter</p>
    <button class="btn btn-outline" (click)="onStatusFilterChange(null)">Clear Filter</button>
  </div>

  <!-- Property grid -->
  <div *ngIf="!loading && !error && filteredBiens.length > 0" class="property-grid">
    <app-bien-card 
      *ngFor="let bien of filteredBiens"
      [bien]="bien"
      [selectable]="deleteMode"
      [selected]="isSelected(bien.id!)"
      (toggleSelect)="toggleSelectBien($event)">
    </app-bien-card>
  </div>
</div>
